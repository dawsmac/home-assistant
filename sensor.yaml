     

  - platform: template
    sensors:
      ds_pirs:
        friendly_name: No activity downstairs
        value_template: >-
          {{ is_state('binary_sensor.hallway_pir' , 'off')
              and is_state('binary_sensor.kitchen_pir' , 'off')
              and is_state('binary_sensor.lounge_pir' , 'off') }}

  - platform: template
    sensors:
      us_pirs:
        friendly_name: No activity upstairs
        value_template: >-
          {{ is_state('binary_sensor.landing_pir' , 'off')
              and is_state('binary_sensor.lila_s_pir' , 'off')
              and is_state('binary_sensor.raf_s_pir' , 'off')
              and is_state('binary_sensor.thea_s_bedroom_pir' , 'off') }}
                            

  - platform: min_max
    entity_ids:
      - sensor.porch
      - sensor.driveway
    type: mean
    name: Outside temperature 
 

  - platform: min_max
    entity_ids:
      - sensor.landing_temperature
      - sensor.lila_room_temperature
      - sensor.master_room_temperature
      - sensor.thea_room_temperature
    type: mean
    name: Upstairs temperature 
 


  - platform: min_max
    entity_ids:
      - sensor.hallway_temperature
      - sensor.lounge_temperature
      - sensor.playroom_s_room_temperature
      - sensor.downstairs_toilet_temperature
    type: mean
    name: Downstairs temperature

  - platform: template
    sensors:
      period_of_day:
         friendly_name: 'period of the day'
         value_template: >-
           {% if (as_timestamp(states.sun.sun.attributes.next_dusk)) - (as_timestamp(states.sun.sun.attributes.next_setting)) < 0 %}
             dusk
           {% elif (as_timestamp(states.sun.sun.attributes.next_rising)) - (as_timestamp(states.sun.sun.attributes.next_dawn)) < 0 %}
             dawn
           {% elif (states.sun.sun.attributes.elevation) < - %}
             night
           {% else %}
             day
           {% endif %}
         icon_template: >-
           {% if (as_timestamp(states.sun.sun.attributes.next_dusk)) - (as_timestamp(states.sun.sun.attributes.next_setting)) < 0 %}
             mdi:weather-sunset-down
           {% elif (as_timestamp(states.sun.sun.attributes.next_rising)) - (as_timestamp(states.sun.sun.attributes.next_dawn)) < 0 %}
             mdi:weather-sunset-up
           {% elif (states.sun.sun.attributes.elevation) < -4 %}
             mdi:weather-night
           {% else %}
             mdi:weather-sunny
           {% endif %}
  
 
  