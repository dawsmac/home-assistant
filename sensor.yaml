     
  - platform: template
    sensors:
      enm:
        friendly_name: Enable night mode?
        value_template: >-
          {% if is_state("group.persons", "home") and is_state("input_boolean.eden_night", "off")-%} 
            true
          {%- else -%}
            false
          {%- endif %}
          
  - platform: template
    sensors:
      emm:
        friendly_name: Enable morning mode?
        value_template: >-
          {% if is_state("group.persons", "home") and is_state("input_boolean.eden_night", "on")-%} 
            true
          {%- else -%}
            false
          {%- endif %}

  - platform: template
    sensors:
      heating_controls_status:
        value_template: >-
          {{ is_state('binary_sensor.heating_controls_node_05' , 'on')
            and is_state('binary_sensor.underfloor_heating_node_02' , 'on' )
            and is_state('binary_sensor.boiler_node_03' , 'on') }}

  - platform: template
    sensors:
      heating_call:
        value_template: >-
          {{ is_state('switch.downstairs_radiators' , 'on')
              or is_state('switch.upstairs_radiators' , 'on')
              or is_state('switch.underfloor_heating' , 'on')
              or is_state('switch.hotwater' , 'on') }}

  - platform: template
    sensors:
      ds_pirs:
        value_template: >-
          {{ is_state('binary_sensor.hallway_pir' , 'off')
              and is_state('binary_sensor.kitchen_pir' , 'off')
              and is_state('binary_sensor.lounge_pir' , 'off') }}

  - platform: template
    sensors:
      us_pirs:
        value_template: >-
          {{ is_state('binary_sensor.landing_pir' , 'off')
              and is_state('binary_sensor.lila_s_pir' , 'off')
              and is_state('binary_sensor.raf_s_pir' , 'off')
              and is_state('binary_sensor.thea_s_bedroom_pir' , 'off') }}
                            


  - platform: time_date
    display_options:
       - 'date_time'

  - platform: min_max
    entity_ids:
      - sensor.porch
      - sensor.driveway
    type: mean
    name: Outside temperature 
 

  - platform: min_max
    entity_ids:
      - sensor.landing_temperature
      - sensor.lila_room_temperature
      - sensor.master_room_temperature
      - sensor.thea_room_temperature
    type: mean
    name: Upstairs temperature 
 


  - platform: min_max
    entity_ids:
      - sensor.hallway_temperature
      - sensor.lounge_temperature
      - sensor.playroom_s_room_temperature
      - sensor.downstairs_toilet_temperature
    type: mean
    name: Downstairs temperature


 